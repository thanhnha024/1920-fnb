"use strict";function editStore(){$("body").on("click",".edit-store-btn",function(e){e.preventDefault(),document.getElementById("edit-store").click()})}function backStore(){$("body").on("click",".btn-back-pickup-store",function(e){e.preventDefault(),document.getElementById("back-store").click()})}function backOrder(){$("body").on("click",".btn-back-pickup-order",function(e){e.preventDefault(),document.getElementById("back-pickup-order").click()})}function selectDinningPreferences(){$("body").on("click",".btn.select-dinning-preferences",function(e){e.preventDefault(),document.getElementById("select-dinning-preferences").click()})}function saveStoreToSession(){$(".button-selected-store").click(function(e){e.preventDefault();e=$(this).closest(".infor-pickup").find(".items-infor-pickup-content.active").data("store-id");e?$.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:{action:"save_store_to_session",store_id:e},success:function(e){document.getElementById("calendar-pickup").click(),$("#notification").hide(),e.success&&e.data.html_segment&&$("#pickup-info-container").html(e.data.html_segment),e.success&&e.data.html_select_time&&$("#time-select-control").html(e.data.html_select_time)},error:function(e){console.log("Failed to save store.")}}):(console.error("No active store selected."),$("#notification").text("No active store selected. Please select a store.").show())})}function resetPickupSession(){$(".btn-just-browsing").click(function(e){e.preventDefault(),$.ajax({url:"/wp-admin/admin-ajax.php",method:"POST",data:{action:"reset_pickup_session"},success:function(e){window.location.href="/order"},error:function(){alert("An error occurred. Please try again.")}})})}function initCalendar(e=Object){var t=new Date,t=(t.setDate(t.getDate()+1),{date:{today:t},settings:{range:{min:getCurrentDate()},selected:{dates:[e.all],month:e.month-1,year:e.year}},actions:{clickDay(e,t){t=t.selectedDates?t.selectedDates[0]:0;renderBoxDate(t)}}});new VanillaCalendar("#calendar",t).init()}function getCurrentDate(){var e=new Date,t=(e.setDate(e.getDate()+1),e.getFullYear());return t+`-${String(e.getMonth()+1).padStart(2,"0")}-`+String(e.getDate()).padStart(2,"0")}function toggleMoreDate(){$("#calendar-control-button").click(function(e){e.preventDefault();$(this).find(".more-date").text("Less Dates"),$("#calendar-control").toggle(),$("#calendar-control-week").toggle()})}function activeBoxDate(n){$(".date-box").each(function(e,t){var a=$(this).attr("data-date-short");if($(".date-box").removeClass("selected"),n==a)return $(this).addClass("selected"),!1})}function renderBoxDate(t){jQuery.ajax({url:"/wp-admin/admin-ajax.php",type:"POST",data:{action:"render_date",selected_date_render:t},success:function(e){$("#calendar-control-week").html(e),activeBoxDate(t)},error:function(e){console.log("Failed to process items.")}})}function chooseDate(){$("body").on("click ",".date-box",function(e){e.preventDefault(),$(".date-box").removeClass("selected"),$(this).addClass("selected");e=$(this).attr("data-date-short"),e=splitDate(e);initCalendar(e)})}function validationEvent(){$("#time-select-option").change(function(e){e.preventDefault(),$(".time-select-control").removeClass("validation"),$(".wrapper.pickup-time p").remove()})}function ajaxAddDate(e,t){0!=e&&0!=t&&jQuery.ajax({url:"/wp-admin/admin-ajax.php",type:"POST",data:{action:"add_session_date",selected_date:e,selected_time:t},success:function(e){console.log(e),window.location.href="/shop/"},error:function(e){console.log("Failed to process items.")}})}function splitDate(e){var t;if(e)return t=e.split("-"),{all:e,year:parseInt(t[0]),month:parseInt(t[1]),day:parseInt(t[2])}}function trigerMainButton(){$("#pickup-date_time").click(function(e){e.preventDefault();var e=$(".date-box.selected").attr("data-date"),t=$("#time-select-option option:selected").val();""==t?($(".time-select-control").addClass("validation"),$(".wrapper.pickup-time").append("<p class='validation'>Please select a time slot</p>")):ajaxAddDate(e,t)})}function initCalendar(e=Object){var t=new Date,t=(t.setDate(t.getDate()+1),{date:{today:t},settings:{range:{min:getCurrentDate()},selected:{dates:[e.all],month:e.month-1,year:e.year}},actions:{clickDay(e,t){t=t.selectedDates?t.selectedDates[0]:0;renderBoxDate(t)}}});new VanillaCalendar("#calendar",t).init()}function getCurrentDate(){var e=new Date,t=(e.setDate(e.getDate()+1),e.getFullYear());return t+`-${String(e.getMonth()+1).padStart(2,"0")}-`+String(e.getDate()).padStart(2,"0")}function toggleMoreDate(){$("#calendar-control-button").click(function(e){e.preventDefault();$(this).find(".more-date").text("Less Dates"),$("#calendar-control").toggle(),$("#calendar-control-week").toggle()})}function activeBoxDate(n){$(".date-box").each(function(e,t){var a=$(this).attr("data-date-short");if($(".date-box").removeClass("selected"),n==a)return $(this).addClass("selected"),!1})}function renderBoxDate(t){jQuery.ajax({url:"/wp-admin/admin-ajax.php",type:"POST",data:{action:"render_date",selected_date_render:t},success:function(e){$("#calendar-control-week").html(e),activeBoxDate(t)},error:function(e){console.log("Failed to process items.")}})}function chooseDate(){$("body").on("click ",".date-box",function(e){e.preventDefault(),$(".date-box").removeClass("selected"),$(this).addClass("selected");e=$(this).attr("data-date-short"),e=splitDate(e);initCalendar(e)})}function validationEvent(){$("#time-select-option").change(function(e){e.preventDefault(),$(".time-select-control").removeClass("validation"),$(".wrapper.pickup-time p").remove()})}function ajaxAddDate(e,t){0!=e&&0!=t&&jQuery.ajax({url:"/wp-admin/admin-ajax.php",type:"POST",data:{action:"add_session_date",selected_date:e,selected_time:t},success:function(e){console.log(e),window.location.href="/shop/"},error:function(e){console.log("Failed to process items.")}})}function splitDate(e){var t;if(e)return t=e.split("-"),{all:e,year:parseInt(t[0]),month:parseInt(t[1]),day:parseInt(t[2])}}function trigerMainButton(){$("#pickup-date_time").click(function(e){e.preventDefault();var e=$(".date-box.selected").attr("data-date"),t=$("#time-select-option option:selected").val();""==t?($(".time-select-control").addClass("validation"),$(".wrapper.pickup-time").append("<p class='validation'>Please select a time slot</p>")):ajaxAddDate(e,t)})}($=jQuery)(document).ready(function(){initCalendar(),toggleMoreDate(),chooseDate(),trigerMainButton(),validationEvent(),editStore(),backStore(),backOrder(),selectDinningPreferences(),saveStoreToSession(),resetPickupSession()}),document.getElementById("pickupButton").addEventListener("click",function(){jQuery.ajax({url:"/wp-admin/admin-ajax.php",type:"POST",data:{action:"display_popup_pickup",pickupstatus:1},success:function(e){document.getElementById("acheck").click()},error:function(e){console.log("Failed to process items.")}})}),jQuery(document).ready(function(t){t("body").on("change",".quantity.buttons_added .qty",function(){var e=t(this).attr("data-cart-item-key");t.ajax({type:"POST",url:mini_cart_params.ajax_url,data:{action:"woocommerce_update_cart_item_quantity",cart_item_key:e,quantity:t(this).val(),_wpnonce:mini_cart_params.update_cart_nonce},success:function(e){t("#cart-items-count").text("You have added "+e.data.cart_count+" items"),t(document.body).trigger("wc_fragment_refresh")},error:function(e){console.log("Error:",e)}})})}),document.addEventListener("DOMContentLoaded",function(){var n=document.querySelectorAll(".items-infor-pickup-content");n.forEach(function(a){a.addEventListener("click",function(){n.forEach(function(e){e.classList.remove("active")}),a.classList.add("active");var e,t=a.querySelector(".linkmap");t&&(t=t.textContent||t.innerText,e=document.getElementById("viewmap"))&&e.setAttribute("href",t)})})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).VanillaCalendar=t()}(this,function(){var A=Object.defineProperty,n=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,s=(e,t,a)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,r=(e,t)=>{for(var a in t=t||{})P.call(t,a)&&s(e,a,t[a]);if(n)for(var a of n(t))I.call(t,a)&&s(e,a,t[a]);return e},a=(e,t,a)=>(s(e,"symbol"!=typeof t?t+"":t,a),a);const t={calendar:"vanilla-calendar",calendarDefault:"vanilla-calendar_default",calendarMultiple:"vanilla-calendar_multiple",calendarMonth:"vanilla-calendar_month",calendarYear:"vanilla-calendar_year",calendarHidden:"vanilla-calendar_hidden",calendarToInput:"vanilla-calendar_to-input",calendarToInputTop:"vanilla-calendar_to-input_top",calendarToInputBottom:"vanilla-calendar_to-input_bottom",controls:"vanilla-calendar-controls",grid:"vanilla-calendar-grid",gridDisabled:"vanilla-calendar-grid_disabled",column:"vanilla-calendar-column",columnMonth:"vanilla-calendar-column_month",columnYear:"vanilla-calendar-column_year",header:"vanilla-calendar-header",headerContent:"vanilla-calendar-header__content",month:"vanilla-calendar-month",monthDisabled:"vanilla-calendar-month_disabled",year:"vanilla-calendar-year",yearDisabled:"vanilla-calendar-year_disabled",arrow:"vanilla-calendar-arrow",arrowPrev:"vanilla-calendar-arrow_prev",arrowNext:"vanilla-calendar-arrow_next",wrapper:"vanilla-calendar-wrapper",content:"vanilla-calendar-content",week:"vanilla-calendar-week",weekDay:"vanilla-calendar-week__day",weekDayWeekend:"vanilla-calendar-week__day_weekend",days:"vanilla-calendar-days",daysSelecting:"vanilla-calendar-days_selecting",months:"vanilla-calendar-months",monthsSelecting:"vanilla-calendar-months_selecting",monthsMonth:"vanilla-calendar-months__month",monthsMonthSelected:"vanilla-calendar-months__month_selected",monthsMonthDisabled:"vanilla-calendar-months__month_disabled",years:"vanilla-calendar-years",yearsSelecting:"vanilla-calendar-years_selecting",yearsYear:"vanilla-calendar-years__year",yearsYearSelected:"vanilla-calendar-years__year_selected",yearsYearDisabled:"vanilla-calendar-years__year_disabled",time:"vanilla-calendar-time",timeContent:"vanilla-calendar-time__content",timeHours:"vanilla-calendar-time__hours",timeMinutes:"vanilla-calendar-time__minutes",timeKeeping:"vanilla-calendar-time__keeping",timeRanges:"vanilla-calendar-time__ranges",timeRange:"vanilla-calendar-time__range",day:"vanilla-calendar-day",dayHoverFirst:"vanilla-calendar-day_hover-first",dayHoverLast:"vanilla-calendar-day_hover-last",dayHoverIntermediate:"vanilla-calendar-day_hover-intermediate",daySelectedFirst:"vanilla-calendar-day_selected-first",daySelectedLast:"vanilla-calendar-day_selected-last",daySelectedIntermediate:"vanilla-calendar-day_selected-intermediate",dayPopup:"vanilla-calendar-day__popup",dayBtn:"vanilla-calendar-day__btn",dayBtnPrev:"vanilla-calendar-day__btn_prev",dayBtnNext:"vanilla-calendar-day__btn_next",dayBtnToday:"vanilla-calendar-day__btn_today",dayBtnSelected:"vanilla-calendar-day__btn_selected",dayBtnHover:"vanilla-calendar-day__btn_hover",dayBtnDisabled:"vanilla-calendar-day__btn_disabled",dayBtnWeekend:"vanilla-calendar-day__btn_weekend",dayBtnHoliday:"vanilla-calendar-day__btn_holiday",weekNumbers:"vanilla-calendar-week-numbers",weekNumbersTitle:"vanilla-calendar-week-numbers__title",weekNumbersContent:"vanilla-calendar-week-numbers__content",weekNumber:"vanilla-calendar-week-number",isFocus:"vanilla-calendar-is-focus"};const F=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-`+String(e.getDate()).padStart(2,"0"),j=e=>new Date(e+"T00:00:00"),d=e=>e.reduce((l,e)=>(e.match(/^(\d{4}-\d{2}-\d{2})$/g)?l.push(e):e.replace(/(\d{4}-\d{2}-\d{2}).*?(\d{4}-\d{2}-\d{2})/g,(e,t,a)=>{for(var t=j(t),n=j(a),s=new Date(t.getTime());s<=n;s.setDate(s.getDate()+1))l.push(F(s));return e}),l),[]),o=e=>e?{0:"12",13:"01",14:"02",15:"03",16:"04",17:"05",18:"06",19:"07",20:"08",21:"09",22:"10",23:"11"}[Number(e)]||String(e):"",i='The calendar has not been initialized, please initialize it using the "init()" method first.',c=e=>{e.currentType=e.type,n=void 0!==(a=e).settings.selected.month&&0<=Number(a.settings.selected.month)&&Number(a.settings.selected.month)<12,s=void 0!==a.settings.selected.year&&0<=Number(a.settings.selected.year)&&Number(a.settings.selected.year)<=9999,a.selectedMonth=n?Number(a.settings.selected.month):a.date.today.getMonth(),a.selectedYear=s?Number(a.settings.selected.year):a.date.today.getFullYear(),a.viewYear=a.selectedYear,(t=e).settings.range.min=(j(t.date.min)>=j(t.settings.range.min)?t.date:t.settings.range).min,t.settings.range.max=(j(t.date.max)<=j(t.settings.range.max)?t.date:t.settings.range).max,n=t.settings.range.disablePast&&!t.settings.range.disableAllDays&&j(t.settings.range.min)<t.date.today,t.rangeMin=n||t.settings.range.disableAllDays?F(t.date.today):t.settings.range.min,t.rangeMax=t.settings.range.disableAllDays?F(t.date.today):t.settings.range.max,t.rangeDisabled=t.settings.range.disabled&&!t.settings.range.disableAllDays?d(t.settings.range.disabled):t.settings.range.disableAllDays?[t.rangeMin]:[],1<t.rangeDisabled.length&&t.rangeDisabled.sort((e,t)=>+new Date(e)-+new Date(t)),t.rangeEnabled=t.settings.range.enabled?d(t.settings.range.enabled):[],null!=(n=t.rangeEnabled)&&n[0]&&null!=(n=t.rangeDisabled)&&n[0]&&(t.rangeDisabled=t.rangeDisabled.filter(e=>!t.rangeEnabled.includes(e))),1<t.rangeEnabled.length&&t.rangeEnabled.sort((e,t)=>+new Date(e)-+new Date(t)),null!=(n=t.rangeEnabled)&&n[0]&&t.settings.range.disableAllDays&&(t.rangeMin=t.rangeEnabled[0],t.rangeMax=t.rangeEnabled[t.rangeEnabled.length-1]),(s=e).selectedDates=null!=(a=s.settings.selected.dates)&&a[0]?d(s.settings.selected.dates):[],s.selectedHolidays=null!=(a=s.settings.selected.holidays)&&a[0]?d(s.settings.selected.holidays):[],(n=e).dateMin=n.settings.visibility.disabled?j(n.date.min):j(n.rangeMin),n.dateMax=n.settings.visibility.disabled?j(n.date.max):j(n.rangeMax);{var l=e;const i=!0===l.settings.selection.time||12===l.settings.selection.time;if(i||24===l.settings.selection.time){let s=!1;"string"==typeof l.settings.selected.time&&(a=i?/^([0-9]|0[1-9]|1[0-2]):([0-5][0-9])|(AM|PM)/g:/^([0-1]?[0-9]|2[0-3]):([0-5][0-9])/g,l.settings.selected.time.replace(a,(e,t,a,n)=>(t&&a&&(s=!0,l.selectedHours=t,l.selectedMinutes=a),n&&i?l.selectedKeeping=n:i&&(l.selectedKeeping="AM"),""))),!s&&i?(l.selectedHours=o(String(l.date.today.getHours())),l.selectedMinutes=String(l.date.today.getMinutes()),l.selectedKeeping=12<=Number(l.date.today.getHours())?"PM":"AM"):s||(l.selectedHours=String(l.date.today.getHours()),l.selectedMinutes=String(l.date.today.getMinutes())),l.selectedHours=Number(l.selectedHours)<10?"0"+Number(l.selectedHours):""+l.selectedHours,l.selectedMinutes=Number(l.selectedMinutes)<10?"0"+Number(l.selectedMinutes):""+l.selectedMinutes,l.selectedTime=l.selectedHours+":"+l.selectedMinutes+(l.selectedKeeping?" "+l.selectedKeeping:"")}else if(l.settings.selection.time)throw new Error("The value of the time property can be: false, true, 12 or 24.")}var t,a,n,s;(s=e).correctMonths="multiple"===s.type?1===s.months?2:12<s.months?12:s.months:1},u=({arrowPrev:e,arrowNext:t,isPrevHidden:a,isNextHidden:n})=>{e.style.visibility=a?"hidden":"",t.style.visibility=n?"hidden":""},M=n=>{var e;if("month"!==n.currentType){const s=null==(e=n.HTMLElement)?void 0:e.querySelector("."+n.CSSClasses.arrowPrev),l=null==(e=n.HTMLElement)?void 0:e.querySelector("."+n.CSSClasses.arrowNext);s&&l&&{default:()=>{var e=j(F(new Date(n.selectedYear,n.selectedMonth,1))),t=new Date(e.getTime()),a=new Date(e.getTime()),e=(t.setMonth(t.getMonth()-n.jumpMonths),a.setMonth(a.getMonth()+n.jumpMonths),n.settings.selection.year||(n.dateMin.setFullYear(e.getFullYear()),n.dateMax.setFullYear(e.getFullYear())),!n.settings.selection.month||t.getFullYear()<n.dateMin.getFullYear()||t.getFullYear()===n.dateMin.getFullYear()&&t.getMonth()<n.dateMin.getMonth()),t=!n.settings.selection.month||a.getFullYear()>n.dateMax.getFullYear()||a.getFullYear()===n.dateMax.getFullYear()&&a.getMonth()>n.dateMax.getMonth();u({arrowPrev:s,arrowNext:l,isPrevHidden:e,isNextHidden:t})},year:()=>{u({arrowPrev:s,arrowNext:l,isPrevHidden:n.dateMin.getFullYear()&&n.viewYear-7<=n.dateMin.getFullYear(),isNextHidden:n.dateMax.getFullYear()&&n.viewYear+7>=n.dateMax.getFullYear()})}}["multiple"===n.currentType?"default":n.currentType]()}},h=(e,t)=>{return e?(e=j(e),t=t?e.getDay()||7:e.getDay(),e.setDate(e.getDate()+4-t),t=new Date(e.getFullYear(),0,1),t=Math.ceil(((+e-+t)/864e5+1)/7),{year:e.getFullYear(),week:t}):null},q=(e,t,a,n,s)=>{var t=t[a].querySelector("."+e.CSSClasses.dayBtn),a=h(null==t?void 0:t.dataset.calendarDay,e.settings.iso8601);a&&((t=n.cloneNode(!0)).innerText=String(a.week),t.dataset.calendarYearWeek=String(a.year),s.append(t))},B=(e,t,a,n,s,l,i,r)=>{var d,o,c,u,m=document.createElement("div");m.className=e.CSSClasses.day;const g=document.createElement("button");g.className=e.CSSClasses.dayBtn+(r?" "+r:""),g.type="button",g.innerText=String(n),g.dataset.calendarDay=l,e.settings.visibility.weekNumbers&&(r=h(l,e.settings.iso8601))&&(g.dataset.calendarWeekNumber=String(r.week)),i&&!e.settings.visibility.daysOutside||m.append(g),r=l,c=null==(c=(o=e).settings.range.disableWeekday)?void 0:c.includes(s),u=o.settings.range.disableAllDays&&!(null==(u=o.rangeEnabled)||!u[0]),!c&&!u||null!=(c=o.rangeEnabled)&&c.includes(r)||null!=(u=o.rangeDisabled)&&u.includes(r)||(o.rangeDisabled.push(r),null==(c=o.rangeDisabled))||c.sort((e,t)=>+new Date(e)-+new Date(t)),u=e,r=t,o=m,c=g,t=s,s=l,i=i,(j(u.rangeMin)>j(s)||j(u.rangeMax)<j(s)||null!=(d=u.rangeDisabled)&&d.includes(s)||!u.settings.selection.month&&i||!u.settings.selection.year&&j(s).getFullYear()!==r)&&(c.classList.add(u.CSSClasses.dayBtnDisabled),c.tabIndex=-1),u.settings.visibility.today&&F(u.date.today)===s&&c.classList.add(u.CSSClasses.dayBtnToday),!u.settings.visibility.weekend||0!==t&&6!==t||c.classList.add(u.CSSClasses.dayBtnWeekend),null!=(d=u.selectedHolidays)&&d.includes(s)&&c.classList.add(u.CSSClasses.dayBtnHoliday),null!=(i=u.selectedDates)&&i.includes(s)&&(c.classList.add(u.CSSClasses.dayBtnSelected),1<u.selectedDates.length)&&"multiple-ranged"===u.settings.selection.day&&(u.selectedDates[0]===s&&o.classList.add(u.CSSClasses.daySelectedFirst),u.selectedDates[u.selectedDates.length-1]===s&&o.classList.add(u.CSSClasses.daySelectedLast),u.selectedDates[0]!==s)&&u.selectedDates[u.selectedDates.length-1]!==s&&o.classList.add(u.CSSClasses.daySelectedIntermediate),a.append(m),e.actions.getDays&&e.actions.getDays(n,l,m,g,e)},C=A=>{const e=A.HTMLElement.querySelectorAll("."+A.CSSClasses.days),P=A.HTMLElement.querySelectorAll("."+A.CSSClasses.weekNumbers),I=new Date(A.selectedYear,A.selectedMonth,1);e.forEach((e,t)=>{var s,l,a=new Date(I),n=(a.setMonth(a.getMonth()+t),a.getMonth()),a=a.getFullYear(),i=new Date(a,n,1),r=new Date(a,n+1,0).getDate(),i=A.settings.iso8601?(0!==i.getDay()?i.getDay():7)-1:i.getDay();A.settings.selection.day&&e.classList.add(A.CSSClasses.daysSelecting),e.innerHTML="";{var d=A,o=e,c=a,u=n,m=i;let t=new Date(c,u,0).getDate()-(m-1);var g=0===u?c-1:c,h=0===u?12:u<10?"0"+u:u;for(let e=m;0<e;e--,t++){const u=g+`-${h}-`+t,m=j(u).getDay();B(d,c,o,t,m,u,!0,d.CSSClasses.dayBtnPrev)}}var v=A,y=e,p=r,S=a,M=n;for(let e=1;e<=p;e++){const p=new Date(S,M,e),Y=F(p),N=p.getDay();B(v,S,y,e,N,Y,!1,null)}var C=A,b=e,f=a,D=n,w=i,w=w+r,T=7*Math.ceil(w/7)-w,k=D+1===12?f+1:f,E=D+1===12?"01":D+2<10?"0"+(D+2):D+2;for(let e=1;e<=T;e++){const D=k+`-${E}-`+(e<10?"0"+e:String(e)),w=j(D).getDay();B(C,f,b,e,w,D,!0,C.CSSClasses.dayBtnNext)}var L=A,u=i,m=r,a=P[t],n=e;if(L.settings.visibility.weekNumbers){a.innerHTML="";var w=document.createElement("b"),_=(w.className=L.CSSClasses.weekNumbersTitle,w.innerText="#",a.append(w),document.createElement("div")),x=(_.className=L.CSSClasses.weekNumbersContent,a.append(_),document.createElement("button")),H=(x.type="button",x.className=L.CSSClasses.weekNumber,n.querySelectorAll("."+L.CSSClasses.day)),$=Math.ceil((u+m)/7);for(let e=0;e<$;e++)q(L,H,0===e?6:7*e,x,_)}l=e,(s=A).popups&&null!=(D=Object.entries(s.popups))&&D.forEach(([e,t])=>{var a=l,n=s.CSSClasses.dayPopup;(a=a.querySelector(`[data-calendar-day="${e}"]`))&&(null!=t&&t.modifier&&a.classList.add(...t.modifier.trim().split(" ")),null!=t)&&t.html&&(a.parentElement.innerHTML+=`<div class="${n}">${t.html}</div>`)})})},b=s=>{var e=null==(e=s.HTMLElement)?void 0:e.querySelectorAll("[data-calendar-selected-month]"),t=null==(t=s.HTMLElement)?void 0:t.querySelectorAll("[data-calendar-selected-year]");if(null!=e&&e[0]||null==t||!t[0]){const l=new Date(s.selectedYear,s.selectedMonth,1);null!=e&&e.forEach((e,t)=>{var a=s,n=l;n=new Date(n.setMonth(a.selectedMonth+t)).getMonth(),t=!1===a.settings.selection.month||"only-arrows"===a.settings.selection.month,e.tabIndex=t?-1:0,e.classList.toggle(a.CSSClasses.monthDisabled,t),e.setAttribute("data-calendar-selected-month",String(n)),e.innerText=a.locale.months[n]}),null!=t&&t.forEach((e,t)=>{var a=s,n=l;n=new Date(n.setFullYear(a.selectedYear,a.selectedMonth+t)).getFullYear(),t=!1===a.settings.selection.year||"only-arrows"===a.settings.selection.year,e.tabIndex=t?-1:0,e.classList.toggle(a.CSSClasses.yearDisabled,t),e.setAttribute("data-calendar-selected-year",String(n)),e.innerText=String(n)})}},g=(e,t)=>{const a=j(F(new Date(e.selectedYear,e.selectedMonth,1)));({prev:()=>a.setMonth(a.getMonth()-e.jumpMonths),next:()=>a.setMonth(a.getMonth()+e.jumpMonths)})[t](),[e.selectedMonth,e.selectedYear]=[a.getMonth(),a.getFullYear()],b(e),M(e),C(e)},O=Object.freeze(Object.defineProperty({__proto__:null,ArrowNext:e=>`<button type="button"class="${e.CSSClasses.arrow} ${e.CSSClasses.arrowNext}"data-calendar-arrow="next"></button>`,ArrowPrev:e=>`<button type="button"class="${e.CSSClasses.arrow} ${e.CSSClasses.arrowPrev}"data-calendar-arrow="prev"></button>`,ControlTime:e=>e.settings.selection.time?`<div class="${e.CSSClasses.time}"></div>`:"",Days:e=>`<div class="${e.CSSClasses.days}"></div>`,Month:e=>`<button type="button"class="${e.CSSClasses.month}"data-calendar-selected-month></button>`,Months:e=>`<div class="${e.CSSClasses.months}"></div>`,Week:e=>`<div class="${e.CSSClasses.week}"></div>`,WeekNumbers:e=>e.settings.visibility.weekNumbers?`<div class="${e.CSSClasses.weekNumbers}"></div>`:"",Year:e=>`<button type="button"class="${e.CSSClasses.year}"data-calendar-selected-year></button>`,Years:e=>`<div class="${e.CSSClasses.years}"></div>`},Symbol.toStringTag,{value:"Module"})),m=(a,e)=>e.replace(/[\n\t]/g,"").replace(/<#(?!\/?Multiple)(.*?)>/g,(e,t)=>{t=t.replace(/[/\s\n\t]/g,"");t=O[t];return t?t(a):""}).replace(/[\n\t]/g,""),f=(s,n)=>{const{HTMLElement:l,CSSClasses:i,DOMTemplates:e,type:t,currentType:a,correctMonths:r}=s,d=(e,t)=>{var a;n&&((a=l.querySelector("."+i.controls))&&l.removeChild(a),l.querySelector("."+i.grid).classList.add(i.gridDisabled),(a=n.closest("."+i.column)).classList.add(e),a.innerHTML=m(s,t))},o={default:()=>{l.classList.add(i.calendarDefault),l.classList.remove(i.calendarMonth,i.calendarYear),l.innerHTML=m(s,e.default)},multiple:()=>{var n;r&&(l.classList.add(i.calendarMultiple),l.classList.remove(i.calendarMonth,i.calendarYear),l.innerHTML=(n=s,m(s,e.multiple).replace(/<#Multiple>(.*?)<#\/Multiple>/g,(e,t)=>{let a="";for(let e=0;e<n.correctMonths;e++)a+=t;return a}).replace(/[\n\t]/g,"")))},month:()=>{"multiple"!==t?(l.classList.add(i.calendarMonth),l.classList.remove(i.calendarDefault,i.calendarYear),l.innerHTML=m(s,e.month)):d(i.columnMonth,e.month)},year:()=>{"multiple"!==t?(l.classList.add(i.calendarYear),l.classList.remove(i.calendarDefault,i.calendarMonth),l.innerHTML=m(s,e.year)):d(i.columnYear,e.year)}};l.classList.add(i.calendar),o[a]()},W=(e,t,a,n,s)=>{t=t.cloneNode(!1);return t.className=""+e.CSSClasses.yearsYear+(a===s?" "+e.CSSClasses.yearsYearSelected:n?" "+e.CSSClasses.yearsYearDisabled:""),t.dataset.calendarYear=String(s),t.title=String(s),t.innerText=String(s),n&&(t.tabIndex=-1),t},D=(t,e)=>{var a=null!=e&&e.dataset.calendarSelectedYear?Number(null==e?void 0:e.dataset.calendarSelectedYear):t.selectedYear,n=(t.currentType="year",f(t,e),b(t),M(t),t.HTMLElement.querySelector("."+t.CSSClasses.years));if(t.settings.selection.year&&n){n.classList.add(t.CSSClasses.yearsSelecting);var s="multiple"!==t.type||t.selectedYear===a?0:1,l=document.createElement("button");l.type="button";for(let e=t.viewYear-7;e<t.viewYear+8;e++){var i=e<t.dateMin.getFullYear()+s||e>t.dateMax.getFullYear(),i=W(t,l,a,i,e);n.append(i),t.actions.getYears&&t.actions.getYears(e,i,t)}}},w=e=>(""+e.charAt(0).toUpperCase()+e.substring(1,e.length)).replace(/\./,""),v=t=>{var e;return"multiple"===t.type&&0<(e=[...t.HTMLElement.querySelectorAll("."+t.CSSClasses.column)].findIndex(e=>e.classList.contains(""+t.CSSClasses.columnMonth)))?e:0},K=(e,t,a,n,s,l)=>{t=t.cloneNode(!1);return t.className=""+e.CSSClasses.monthsMonth+(a===l?" "+e.CSSClasses.monthsMonthSelected:s?" "+e.CSSClasses.monthsMonthDisabled:""),t.title=n,t.innerText=""+(e.settings.visibility.monthShort?n.substring(0,3):n),t.dataset.calendarMonth=String(l),s&&(t.tabIndex=-1),t},T=(a,e)=>{var t,n;const s=null!=e&&e.dataset.calendarSelectedMonth?Number(e.dataset.calendarSelectedMonth):a.selectedMonth,l=null==(t=null==e?void 0:e.closest("."+a.CSSClasses.column))?void 0:t.querySelector("."+a.CSSClasses.year),i=l?Number(l.dataset.calendarSelectedYear):a.selectedYear;a.currentType="month",f(a,e),b(a);var r=null==(n=a.HTMLElement)?void 0:n.querySelector("."+a.CSSClasses.months);if(a.settings.selection.month&&r){r.classList.add(a.CSSClasses.monthsSelecting);var d=1<a.jumpMonths?a.locale.months.map((e,t)=>s-a.jumpMonths*t).concat(a.locale.months.map((e,t)=>s+a.jumpMonths*t)).filter(e=>0<=e&&e<=12):Array.from(Array(12).keys()),o=document.createElement("button");o.type="button";for(let e=0;e<12;e++){const t=a.locale.months[e],n=e<a.dateMin.getMonth()+v(a)&&i<=a.dateMin.getFullYear()||e>a.dateMax.getMonth()+v(a)&&i>=a.dateMax.getFullYear()||e!==s&&!d.includes(e),l=K(a,o,s,t,n,e);r.append(l),a.actions.getMonths&&a.actions.getMonths(e,l,a)}}},k=(e,t)=>e&&t?{0:{AM:"00",PM:"12"},1:{AM:"01",PM:"13"},2:{AM:"02",PM:"14"},3:{AM:"03",PM:"15"},4:{AM:"04",PM:"16"},5:{AM:"05",PM:"17"},6:{AM:"06",PM:"18"},7:{AM:"07",PM:"19"},8:{AM:"08",PM:"20"},9:{AM:"09",PM:"21"},10:{AM:"10",PM:"22"},11:{AM:"11",PM:"23"},12:{AM:"12",PM:"12"}}[Number(e)][t]:"",E=(e,t,a)=>e.querySelector("."+t+(a?` input[name="${a}"]`:"")),L=(e,t,a)=>{e.addEventListener("mouseover",()=>t.classList.add(a)),e.addEventListener("mouseout",()=>t.classList.remove(a))},_=(e,t,a,n)=>{({hours:()=>{e.selectedHours=a},minutes:()=>{e.selectedMinutes=a}})[n](),e.selectedTime=e.selectedHours+":"+e.selectedMinutes+(e.selectedKeeping?" "+e.selectedKeeping:""),e.actions.changeTime&&e.actions.changeTime(t,e),e.input&&e.HTMLInputElement&&e.actions.changeToInput&&e.actions.changeToInput(t,e)},x=(s,e,l,i,r,d)=>{e.addEventListener("input",e=>{var t=e.target,a=Number(t.value),n=a<10?"0"+a:""+a;"hours"!==r||12!==d?(l.value=n,_(s,e,n,r)):a<d&&0<a?(l.value=n,s.selectedKeeping="AM",i.innerText=s.selectedKeeping,_(s,e,n,r)):(0===a?(s.selectedKeeping="AM",i.innerText="AM"):(s.selectedKeeping="PM",i.innerText="PM"),l.value=o(t.value),_(s,e,o(t.value),r))})},H=(s,l,e,i,r,d)=>{e.addEventListener("change",e=>{var t=e.target,a=Number(t.value),n=a<10?"0"+a:""+a;"hours"===r&&12===d?t.value&&a<=d&&0<a?(t.value=n,l.value=k(n,s.selectedKeeping),_(s,e,n,r)):t.value&&a<24&&(d<a||0===a)?(0===a?(s.selectedKeeping="AM",i.innerText="AM"):(s.selectedKeeping="PM",i.innerText="PM"),t.value=o(t.value),l.value=n,_(s,e,o(t.value),r)):t.value=s.selectedHours:t.value&&a<=d&&0<=a?(t.value=n,l.value=n,_(s,e,n,r)):"hours"===r?t.value=s.selectedHours:"minutes"===r&&(t.value=s.selectedMinutes)})},R=(e,t,a,n)=>`<label class="${t}"><input type="text"name="${e}"maxlength="2"value="${a}"${n?"disabled":""}></label>`,Q=(e,t,a,n,s,l)=>`<label class="${t}"><input type="range"name="${e}"min="${a}"max="${n}"step="${s}"value="${l}"></label>`,z=r=>{const d=[...r.locale.weekday];d[0]&&(r.settings.iso8601&&d.push(d.shift()),r.HTMLElement.querySelectorAll("."+r.CSSClasses.week).forEach(e=>{var t=r,a=e,n=d,s=document.createElement("b");a.innerHTML="";for(let e=0;e<n.length;e++){var l=n[e],i=s.cloneNode(!0);i.className=""+t.CSSClasses.weekDay,i.className=""+t.CSSClasses.weekDay+(t.settings.visibility.weekend&&t.settings.iso8601?5===e||6===e?" "+t.CSSClasses.weekDayWeekend:"":!t.settings.visibility.weekend||t.settings.iso8601||0!==e&&6!==e?"":" "+t.CSSClasses.weekDayWeekend),i.innerText=""+l,a.append(i)}}))},G=["light","dark","system"],l={value:!1,set:()=>{l.value=!0},check:()=>l.value},V=(a,n)=>G.find(e=>{var t;return"system"!==e&&(null==(t=a.getAttribute(n))?void 0:t.includes(e))}),$=(e,t)=>{e.dataset.calendarTheme=t},Z=(a,e)=>{var t=e;$(a.HTMLElement,t.matches?"dark":"light"),"system"!==a.settings.visibility.theme||l.check()||(t=t=>{var e=document.querySelectorAll("."+a.CSSClasses.calendar);null!=e&&e.forEach(e=>$(e,t.matches?"dark":"light"))},e.addEventListener?e.addEventListener("change",t):e.addListener(t),l.set())},y=e=>{var t,a,n,s,l,i,r,d,o,c,u,m={default:()=>{z(e),C(e)},multiple:()=>{z(e),C(e)},month:()=>T(e),year:()=>D(e)},g=e;if(!G.includes(g.settings.visibility.theme))throw new Error('Incorrect name of theme in "settings.visibility.theme".');"not all"===window.matchMedia("(prefers-color-scheme)").media?$(g.HTMLElement,"light"):{light:()=>$(g.HTMLElement,"light"),dark:()=>$(g.HTMLElement,"dark"),system:()=>{var e,t,a,n,s,l,i,r;e=g,t=window.matchMedia("(prefers-color-scheme: dark)"),(r=e.settings.visibility.themeDetect?document.querySelector(e.settings.visibility.themeDetect):null)&&(a=e.settings.visibility.themeDetect.replace(/^.*\[(.+)\]/g,(e,t)=>t),n=V(r,a))?($(e.HTMLElement,n),s=e,l=r,i=a,new MutationObserver(t=>{for(let e=0;e<t.length;e++)if(t[e].attributeName===i){const t=V(l,i);t&&$(s.HTMLElement,t);break}}).observe(l,{attributes:!0})):Z(e,t)}}[g.settings.visibility.theme]();var h=e;if("define"!==h.settings.lang||!h.locale.weekday[6]||!h.locale.months[11]){if("define"===h.settings.lang)throw new Error('You specified "define" for "settings.lang" but did not provide the required values for "locale.weekday" or "locale.months".');h.locale.weekday=[],h.locale.months=[];for(let e=0;e<7;e++){var v=h;var y=e;y=new Date(`1978-01-0${y+1}T00:00:00.000Z`).toLocaleString(v.settings.lang,{weekday:"short",timeZone:"UTC"});v.locale.weekday.push(w(y))}for(let e=0;e<12;e++){var p=h;var S=e;S=new Date(`1978-${S+1<=9?"0"+(S+1):S+1}-01T00:00:00.000Z`).toLocaleString(p.settings.lang,{month:"long",timeZone:"UTC"});p.locale.months.push(w(S))}}f(e),b(e),M(e),(u=(t=e).HTMLElement.querySelector("."+t.CSSClasses.time))&&(a=!0===t.settings.selection.time?12:t.settings.selection.time,n="range"===t.settings.selection.controlTime,[s,l]=[0,23],[o,c]=[0,59],u.innerHTML=`<div class="${t.CSSClasses.timeContent}">${R("hours",t.CSSClasses.timeHours,t.selectedHours,n)}${R("minutes",t.CSSClasses.timeMinutes,t.selectedMinutes,n)}${12===a?`<button type="button" class="${t.CSSClasses.timeKeeping}"${n?"disabled":""}>${t.selectedKeeping}</button>`:""}</div><div class="${t.CSSClasses.timeRanges}">${Q("hours",t.CSSClasses.timeRange,s,l,t.settings.selection.stepHours,t.selectedKeeping?k(t.selectedHours,t.selectedKeeping):t.selectedHours)}${Q("minutes",t.CSSClasses.timeRange,o,c,t.settings.selection.stepMinutes,t.selectedMinutes)}</div>`,n=t,s=u,l=24===(l=a)?23:l||12,o=E(s,n.CSSClasses.timeRange,"hours"),c=E(s,n.CSSClasses.timeRange,"minutes"),t=E(s,n.CSSClasses.timeHours,"hours"),u=E(s,n.CSSClasses.timeMinutes,"minutes"),s=s.querySelector("."+n.CSSClasses.timeKeeping),L(o,t,n.CSSClasses.isFocus),L(c,u,n.CSSClasses.isFocus),x(n,o,t,s,"hours",l),x(n,c,u,s,"minutes",0),H(n,o,t,s,"hours",l),H(n,c,u,s,"minutes",59),s)&&(i=n,d=o,(r=s).addEventListener("click",e=>{i.selectedKeeping=r.innerText.includes("AM")?"PM":"AM",r.innerText=i.selectedKeeping,d.value=k(i.selectedHours,i.selectedKeeping),_(i,e,i.selectedHours,"hours")})),m[e.currentType]()},p={self:null,rangeMin:void 0,rangeMax:void 0},U=()=>{var e;if(null!=(e=p.self)&&e.HTMLElement){const t=p.self["CSSClasses"];p.self.HTMLElement.querySelectorAll("."+p.self.CSSClasses.dayBtnHover).forEach(e=>{e.classList.remove(p.self.CSSClasses.dayBtnHover),null!=(e=e.parentElement)&&e.classList.remove(t.dayHoverIntermediate,t.dayHoverFirst,t.dayHoverLast)})}},S=e=>{if(e.target&&null!=(t=p.self)&&t.selectedDates)if(e.target.closest("."+p.self.CSSClasses.days)){var t=e.target.closest("[data-calendar-day]");if(t){var e=t.dataset.calendarDay,t=j(p.self.selectedDates[0]),a=j(e),n=p.self.HTMLElement.querySelectorAll(`[data-calendar-day="${p.self.selectedDates[0]}"]`),e=p.self.HTMLElement.querySelectorAll(`[data-calendar-day="${e}"]`),[s,l]=t<a?[n,e]:[e,n],[e,i]=t<a?[t,a]:[a,t];U();for(var r=new Date(e);r<=i;r.setDate(r.getDate()+1))((e,t,a)=>{var n;if(null!=(n=p.self)&&n.selectedDates){const s=F(e),l=p.self["CSSClasses"];null!=(n=p.self.rangeDisabled)&&n.includes(s)||(null!=(n=null==(e=p.self.HTMLElement)?void 0:e.querySelectorAll(`[data-calendar-day="${s}"]`))&&n.forEach(e=>{e.classList.add(l.dayBtnHover),null!=(e=e.parentElement)&&e.classList.add(l.dayHoverIntermediate)}),null!=t&&t.forEach(e=>{return null==(e=e.parentElement)?void 0:e.classList.add(l.dayHoverFirst)}),null!=a&&a.forEach(e=>{return null==(e=e.parentElement)?void 0:e.classList.add(l.dayHoverLast)}))}})(r,s,l)}}else U()},Y=e=>{p.self&&"Escape"===e.key&&(p.self.selectedDates=[],p.self.HTMLElement.removeEventListener("mousemove",S),document.removeEventListener("keydown",Y),y(p.self))},X=(s,e)=>{if(e){const t=1===s.selectedDates.length&&s.selectedDates[0].includes(e);s.selectedDates=t&&!s.settings.selection.cancelableDay?[e,e]:t&&s.settings.selection.cancelableDay?[]:1<s.selectedDates.length?[e]:[...s.selectedDates,e],null!=(e=s.selectedDates)&&e.sort((e,t)=>+new Date(e)-+new Date(t))}s.settings.range.disableGaps&&(p.rangeMin=p.rangeMin||s.rangeMin,p.rangeMax=p.rangeMax||s.rangeMax),p.self=s;const t={set:()=>{var e;if((s.HTMLElement.addEventListener("mousemove",S),document.addEventListener("keydown",Y),s.settings.range.disableGaps)&&(null!=(e=null==(e=p.self)?void 0:e.selectedDates)&&e[0]&&p.self.rangeDisabled&&!((null==(e=p.self.rangeDisabled)?void 0:e.length)<2))){const n=j(p.self.selectedDates[0]),[t,a]=p.self.rangeDisabled.map(e=>j(e)).reduce(([e,t],a)=>[n>=a?a:e,n<a&&null===t?a:t],[null,null]);t&&(p.self.rangeMin=F(new Date(t.setDate(t.getDate()+1)))),a&&(p.self.rangeMax=F(new Date(a.setDate(a.getDate()-1))))}},reset:()=>{var[e,t]=[s.selectedDates[0],s.selectedDates[s.selectedDates.length-1]];s.selectedDates=s.selectedDates[0]!==s.selectedDates[s.selectedDates.length-1]?d([e+":"+t]):[s.selectedDates[0],s.selectedDates[0]],s.HTMLElement.removeEventListener("mousemove",S),document.removeEventListener("keydown",Y),s.settings.range.disableGaps&&p.self&&(p.self.rangeMin=p.rangeMin,p.self.rangeMax=p.rangeMax)}};t[1===s.selectedDates.length?"set":"reset"]()},J=(e,t,a)=>{if(t.dataset.calendarDay){const n=t.dataset.calendarDay,s=t.classList.contains(e.CSSClasses.dayBtnSelected);s&&!e.settings.selection.cancelableDay||(e.selectedDates=s?e.selectedDates.filter(e=>e!==n):a?[...e.selectedDates,n]:[n])}},ee=(e,t,a,n,s)=>{var l=e.HTMLElement.querySelectorAll("."+e.CSSClasses.column),i=[...l].findIndex(e=>e.classList.contains(t)),l=Number(l[i].querySelector("."+a).getAttribute(s));return"month"===e.currentType&&0<=i?n-i:"year"===e.currentType&&e.selectedYear!==l?n-1:n},te=(e,t,a,n)=>{if(e.settings.selection[a]){const d=t.target,o=e=>d.closest("."+e),c=o(n.header),u=o(n.item),m=o(e.CSSClasses.grid),g=o(e.CSSClasses.column);var l,s,i,r;e.currentType!==a&&c?{year:()=>D(e,d),month:()=>T(e,d)}[a]():u?(l=e,s=t,i=n,r=u,t={year:()=>{var e,t;return null==(t=(e=l.actions).clickYear)?void 0:t.call(e,s,l)},month:()=>{var e,t;return null==(t=(e=l.actions).clickMonth)?void 0:t.call(e,s,l)}},{year:()=>{var e,t,a,n,s;"multiple"===l.type?(e=ee(l,l.CSSClasses.columnYear,l.CSSClasses.year,Number(r.dataset.calendarYear),"data-calendar-selected-year"),t=l.selectedMonth<l.dateMin.getMonth()&&e<=l.dateMin.getFullYear(),a=l.selectedMonth>l.dateMax.getMonth()&&e>=l.dateMax.getFullYear(),n=e<l.dateMin.getFullYear(),s=e>l.dateMax.getFullYear(),t||n?(l.selectedYear=l.dateMin.getFullYear(),l.selectedMonth=l.dateMin.getMonth()):a||s?(l.selectedYear=l.dateMax.getFullYear(),l.selectedMonth=l.dateMax.getMonth()):l.selectedYear=e):l.selectedYear=Number(r.dataset.calendarYear)},month:()=>{var e,t,a;"multiple"===l.type?(e=ee(l,l.CSSClasses.columnMonth,l.CSSClasses.month,Number(r.dataset.calendarMonth),"data-calendar-selected-month"),t=r.closest("."+i.column).querySelector("."+l.CSSClasses.year),l.selectedYear=Number(t.dataset.calendarSelectedYear),t=e<l.dateMin.getMonth()&&l.selectedYear<=l.dateMin.getFullYear(),a=e>l.dateMax.getMonth()&&l.selectedYear>=l.dateMax.getFullYear(),l.selectedMonth=t?l.dateMin.getMonth():a?l.dateMax.getMonth():e):l.selectedMonth=Number(r.dataset.calendarMonth)}}[n=a](),t[n](),l.currentType=l.type,y(l)):(e.currentType===a&&c||"multiple"===e.type&&e.currentType===a&&m&&!g)&&(e.currentType=e.type,y(e))}},ae=m=>{const e=e=>{n=m,(t=(a=e).target.closest("."+n.CSSClasses.arrow))&&(["default","multiple"].includes(n.currentType)?g(n,t.dataset.calendarArrow):"year"===n.currentType&&void 0!==n.viewYear&&(n.viewYear+={prev:-15,next:15}[t.dataset.calendarArrow],D(n,a.target)),n.actions.clickArrow)&&n.actions.clickArrow(a,n);var t=m,a=e;if(t.settings.visibility.weekNumbers&&t.actions.clickWeekNumber){var n=a.target.closest("."+t.CSSClasses.weekNumber),s=null==(s=t.HTMLElement)?void 0:s.querySelectorAll("[data-calendar-week-number]");if(n&&s){const i=Number(n.innerText),r=Number(n.dataset.calendarYearWeek),d=[...s].filter(e=>Number(e.dataset.calendarWeekNumber)===i);t.actions.clickWeekNumber(a,i,d,r,t)}}{var l=m;const o=(n=e).target,c=e=>o.closest("."+e),u=c(l.CSSClasses.dayBtn);l.settings.selection.day&&["single","multiple","multiple-ranged"].includes(l.settings.selection.day)&&u&&({single:()=>J(l,u,!1),multiple:()=>J(l,u,!0),"multiple-ranged":()=>X(l,u.dataset.calendarDay)}[l.settings.selection.day](),null!=(s=l.selectedDates)&&s.sort((e,t)=>+new Date(e)-+new Date(t)),l.actions.clickDay&&l.actions.clickDay(n,l),l.input&&l.HTMLInputElement&&l.HTMLElement&&l.actions.changeToInput&&l.actions.changeToInput(n,l),s=c(l.CSSClasses.dayBtnPrev),n=c(l.CSSClasses.dayBtnNext),{prev:()=>g(l,"prev"),next:()=>g(l,"next"),default:()=>C(l)}[s?"prev":n?"next":"default"]())}te(m,e,"month",{header:m.CSSClasses.month,item:m.CSSClasses.monthsMonth,column:m.CSSClasses.columnMonth}),te(m,e,"year",{header:m.CSSClasses.year,item:m.CSSClasses.yearsYear,column:m.CSSClasses.columnYear})};return m.HTMLElement.addEventListener("click",e),()=>m.HTMLElement.removeEventListener("click",e)},ne=(e,{year:t,month:a,dates:n,holidays:s,time:l}={})=>{var i=r({},e.settings.selected);e.settings.selected.year=t?i.year:e.selectedYear,e.settings.selected.month=a?i.month:e.selectedMonth,e.settings.selected.holidays=s?i.holidays:e.selectedHolidays,e.settings.selected.time=l?i.time:e.selectedTime,e.settings.selected.dates="only-first"===n&&null!=(t=e.selectedDates)&&t[0]?[e.selectedDates[0]]:!0===n?i.dates:e.selectedDates,c(e),y(e),e.settings.selected=i,"multiple-ranged"===e.settings.selection.day&&n&&X(e)},N=(e,t,a,n)=>{var s={top:-t.offsetHeight,bottom:e.offsetHeight,left:0,center:e.offsetWidth/2-t.offsetWidth/2,right:e.offsetWidth-t.offsetWidth},l=Array.isArray(a)?a[0]:"bottom",a=Array.isArray(a)?a[1]:a,n=(t.classList.add("bottom"===l?n.calendarToInputBottom:n.calendarToInputTop),e.getBoundingClientRect()),e=window.scrollX||document.documentElement.scrollLeft,i=window.scrollY||document.documentElement.scrollTop,i=n.top+i+s[l],l=n.left+e+s[a];Object.assign(t.style,{left:l+"px",top:i+"px"})};return class extends class{constructor(){var e;a(this,"isInit",!1),a(this,"input",!1),a(this,"type","default"),a(this,"months",2),a(this,"jumpMonths",1),a(this,"date",{min:"1970-01-01",max:"2470-12-31",today:new Date}),a(this,"settings",{lang:"en",iso8601:!0,range:{min:this.date.min,max:this.date.max,disablePast:!1,disableGaps:!1,disableAllDays:!1,disableWeekday:void 0,disabled:void 0,enabled:void 0},selection:{day:"single",month:!0,year:!0,time:!1,controlTime:"all",stepHours:1,stepMinutes:1,cancelableDay:!0},selected:{dates:void 0,month:void 0,year:void 0,holidays:void 0,time:void 0},visibility:{theme:"system",themeDetect:"html[data-theme]",monthShort:!0,weekNumbers:!1,weekend:!0,today:!0,disabled:!1,daysOutside:!0,positionToInput:"left"}}),a(this,"locale",{months:[],weekday:[]}),a(this,"actions",{clickDay:null,clickWeekNumber:null,clickMonth:null,clickYear:null,clickArrow:null,changeTime:null,changeToInput:null,getDays:null,getMonths:null,getYears:null,initCalendar:null,updateCalendar:null,destroyCalendar:null,showCalendar:null,hideCalendar:null}),a(this,"popups",{}),a(this,"CSSClasses",r({},t)),a(this,"DOMTemplates",{default:`<div class="${(e=this.CSSClasses).header}"><#ArrowPrev /><div class="${e.headerContent}"><#Month /><#Year /></div><#ArrowNext /></div><div class="${e.wrapper}"><#WeekNumbers /><div class="${e.content}"><#Week /><#Days /></div></div><#ControlTime />`,multiple:`<div class="${(e=this.CSSClasses).controls}"><#ArrowPrev /><#ArrowNext /></div><div class="${e.grid}"><#Multiple><div class="${e.column}"><div class="${e.header}"><div class="${e.headerContent}"><#Month /><#Year /></div></div><div class="${e.wrapper}"><#WeekNumbers /><div class="${e.content}"><#Week /><#Days /></div></div></div><#/Multiple></div><#ControlTime />`,month:`<div class="${(e=this.CSSClasses).header}"><div class="${e.headerContent}"><#Month /><#Year /></div></div><div class="${e.wrapper}"><div class="${e.content}"><#Months /></div></div>`,year:`<div class="${(e=this.CSSClasses).header}"><#ArrowPrev /><div class="${e.headerContent}"><#Month /><#Year /></div><#ArrowNext /></div><div class="${e.wrapper}"><div class="${e.content}"><#Years /></div></div>`}),a(this,"HTMLElement"),a(this,"HTMLOriginalElement"),a(this,"HTMLInputElement"),a(this,"rangeMin"),a(this,"rangeMax"),a(this,"rangeDisabled"),a(this,"rangeEnabled"),a(this,"selectedDates"),a(this,"selectedHolidays"),a(this,"selectedMonth"),a(this,"selectedYear"),a(this,"selectedHours"),a(this,"selectedMinutes"),a(this,"selectedKeeping"),a(this,"selectedTime"),a(this,"currentType"),a(this,"correctMonths"),a(this,"viewYear"),a(this,"dateMin"),a(this,"dateMax")}}{constructor(e,t){if(super(),a(this,"init",()=>{return(e=this).HTMLOriginalElement=e.HTMLElement.cloneNode(!0),e.isInit=!0,(e.input?a=>{let t=!0;const e=[],n=(a.HTMLInputElement=a.HTMLElement,()=>N(a.HTMLInputElement,a.HTMLElement,a.settings.visibility.positionToInput,a.CSSClasses)),s=e=>{var t;!a||e.target===a.HTMLInputElement||null!=(t=a.HTMLElement)&&t.contains(e.target)||(a.HTMLInputElement&&a.HTMLElement&&a.hide(),window.removeEventListener("resize",n),document.removeEventListener("click",s,{capture:!0}))};return a.HTMLInputElement.addEventListener("click",()=>{t?e.push((()=>{const e=document.createElement("div");return e.className=`${a.CSSClasses.calendar} ${a.CSSClasses.calendarToInput} `+a.CSSClasses.calendarHidden,a.HTMLElement=e,document.body.append(a.HTMLElement),t=!1,setTimeout(()=>{N(a.HTMLInputElement,e,a.settings.visibility.positionToInput,a.CSSClasses),a.show()},0),ne(a,{year:!0,month:!0,dates:!0,holidays:!0,time:!0}),a.actions.initCalendar&&a.actions.initCalendar(a),ae(a)})()):(N(a.HTMLInputElement,a.HTMLElement,a.settings.visibility.positionToInput,a.CSSClasses),a.show()),window.addEventListener("resize",n),document.addEventListener("click",s,{capture:!0})}),()=>{e.forEach(e=>e())}}:(c(e),y(e),e.actions.initCalendar&&e.actions.initCalendar(e),ae))(e);var e}),a(this,"update",e=>{var[e,{year:t,month:a,dates:n,holidays:s,time:l}={}]=[this,e];if(!e.isInit)throw new Error(i);ne(e,{year:t,month:a,dates:n,holidays:s,time:l}),e.actions.updateCalendar&&e.actions.updateCalendar(e)}),a(this,"destroy",()=>{var e,t=this;if(!t.isInit)throw new Error(i);t.input?(null!=(e=null==(e=t.HTMLElement)?void 0:e.parentElement)&&e.removeChild(t.HTMLElement),null!=(e=t.HTMLInputElement)&&e.replaceWith(t.HTMLOriginalElement),t.HTMLInputElement=void 0):null!=(e=t.HTMLElement)&&e.replaceWith(t.HTMLOriginalElement),t.HTMLElement=t.HTMLOriginalElement,t.actions.destroyCalendar&&t.actions.destroyCalendar(t)}),a(this,"show",()=>{var e;(e=this).currentType?(e.HTMLElement.classList.remove(e.CSSClasses.calendarHidden),e.actions.showCalendar&&e.actions.showCalendar(e)):e.HTMLElement.click()}),a(this,"hide",()=>{var e;(e=this).currentType&&(e.HTMLElement.classList.add(e.CSSClasses.calendarHidden),e.actions.hideCalendar)&&e.actions.hideCalendar(e)}),this.HTMLElement="string"==typeof e?document.querySelector(e):e,!this.HTMLElement)throw new Error(e+" is not found, check the first argument passed to new VanillaCalendar.");if(t){const n=(t,a)=>{Object.keys(a).forEach(e=>{"object"!=typeof t[e]||"object"!=typeof a[e]||a[e]instanceof Date?t[e]=a[e]:n(t[e],a[e])})};n(this,t)}}}});